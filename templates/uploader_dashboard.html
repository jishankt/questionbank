<!DOCTYPE html>
<html>
<head>
    <title>SFI QuestionBank - Uploader Dashboard</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

    <style>
        body{
            margin:0;
            font-family:'Poppins', sans-serif;
            background: linear-gradient(to right, #eef2f3, #dfe9f3);
        }

        /* NAVBAR */
        nav{
            background:#1e3a5f;
            padding:15px 20px;
            display:flex;
            justify-content:space-between;
            align-items:center;
            flex-wrap:wrap;
        }

        nav h2{
            color:white;
            margin:0;
            font-size:20px;
        }

        nav a{
            color:white;
            text-decoration:none;
            margin-left:15px;
            font-weight:500;
            margin-top:5px;
        }

        nav a:hover{
            color:#4fc3f7;
        }

        /* PAGE CONTAINER */
        .container{
            max-width:1000px;
            margin:auto;
            padding:20px;
        }

        /* DASHBOARD HEADER */
        .header{
            display:flex;
            justify-content:space-between;
            align-items:center;
            margin-bottom:20px;
            flex-wrap:wrap;
        }

        .btn{
            padding:10px 18px;
            border-radius:8px;
            text-decoration:none;
            color:white;
            font-size:14px;
            transition:0.3s;
        }

        .upload-btn{
            background:#4CAF50;
        }

        .upload-btn:hover{
            background:#388e3c;
        }

        /* CARD STYLE */
        .card{
            background:white;
            border-radius:15px;
            padding:15px 20px;
            margin-bottom:25px;
            box-shadow:0 4px 12px rgba(0,0,0,0.1);
        }

        .card h3{
            margin-top:0;
            color:#1e3a5f;
            font-size:18px;
        }

        /* TABLE */
        .table-responsive{
            overflow-x:auto;
        }

        table{
            width:100%;
            border-collapse:collapse;
            margin-top:10px;
            min-width: 500px;
        }

        th{
            background:#1e3a5f;
            color:white;
            padding:10px;
            text-align:left;
            font-size:14px;
        }

        td{
            padding:8px;
            border-bottom:1px solid #ddd;
            font-size:13px;
        }

        tr:hover{
            background:#f5f5f5;
        }

        /* ACTION LINKS */
        .view{
            color:#039be5;
            text-decoration:none;
            font-weight:bold;
        }

        .delete{
            color:#e53935;
            text-decoration:none;
            font-weight:bold;
        }

        .empty{
            color:#777;
            font-size:14px;
        }

        /* RESPONSIVE */
        @media (max-width: 600px){
            nav{
                flex-direction:column;
                align-items:flex-start;
            }

            .header{
                flex-direction:column;
                align-items:flex-start;
            }

            .upload-btn{
                margin-top:10px;
            }

            th, td{
                font-size:12px;
            }

            .card h3{
                font-size:16px;
            }
        }
    </style>
</head>

<body>

<!-- NAVBAR -->
<nav>
    <h2>üìö SFI QuestionBank</h2>

    <div>
        <a href="/papers/upload/">Upload Paper</a>
        <a href="/accounts/logout/">Logout</a>
    </div>
</nav>

<div class="container">

    <!-- HEADER -->
    <div class="header">
        <h1 style="font-size:20px; color:#1e3a5f;">Uploader Dashboard</h1>
        <a class="btn upload-btn" href="/papers/upload/">+ Upload New Paper</a>
    </div>

    <!-- PAPERS SECTION -->
    <div class="card">
        <h3>üìÑ Uploaded Papers</h3>

        {% if papers %}
        <div class="table-responsive">
            <table>
                <tr>
                    <th>Subject</th>
                    <th>Class</th>
                    <th>Year</th>
                    <th>Actions</th>
                </tr>

                {% for paper in papers %}
                <tr>
                    <td>{{ paper.subject }}</td>
                    <td>{{ paper.class_name }}</td>
                    <td>{{ paper.year }}</td>
                    <td>
                        <a class="view" href="{{ paper.pdf_file.url }}" target="_blank">View</a> |
                        <a class="delete" href="/papers/delete/{{ paper.id }}/">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </table>
        </div>

        {% else %}
            <p class="empty">No papers uploaded yet.</p>
        {% endif %}
    </div>

    <!-- STUDENTS SECTION -->
    <div class="card">
        <h3>üë®‚Äçüéì Registered Students</h3>

        {% if students %}
        <div class="table-responsive">
            <table>
                <tr>
                    <th>Username</th>
                    <th>Email</th>
                    <th>Class</th>
                    <th>School</th>
                </tr>

                {% for student in students %}
                <tr>
                    <td>{{ student.user.username }}</td>
                    <td>{{ student.user.email }}</td>
                    <td>{{ student.class_name }}</td>
                    <td>{{ student.school_name }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        {% else %}
            <p class="empty">No students registered.</p>
        {% endif %}
    </div>

</div>

</body>
</html>
